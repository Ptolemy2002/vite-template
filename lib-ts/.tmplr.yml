steps:
  - read: remote_owner
    from: git.remote_owner
    fallback:
      from: env.TMPLR_GIT_USER
  
  - read: remote_email
    from: git.remote_email
    fallback:
      from: env.TMPLR_GIT_EMAIL
      
  - read: project_name
    prompt: "Project name"
    choices:
      - From file:
          from: filesystem.rootdir
      - Custom:
          prompt: "Enter project name:"
          default:
            from: filesystem.rootdir
  - read: package_id
    prompt: "Package ID"
    choices:
      - From file:
          eval: "{{ filesystem.rootdir | kebab-case }}"
      - From project name:
          eval: "{{ project_name | kebab-case }}"
      - Custom:
          prompt: "Enter package ID:"
          default:
            eval: "{{ project_name | kebab-case }}"

  - read: workspace_name
    prompt: "Workspace name"
    choices:
      - From git username:
          from: remote_owner
      - Custom:
          prompt: "Enter workspace name:"
          default:
            from: remote_owner
      - None: ""

  - read: author_name
    prompt: "Author name"
    choices:
      - From git username:
          from: remote_owner
      - From env:
          from: env.TMPLR_AUTHOR_NAME
      - Custom:
          prompt: "Enter workspace name:"
          default:
            from: remote_owner
  
  - read: author_email
    prompt: "Author email"
    choices:
      - From git email:
          from: remote_email
      - From env:
          from: env.TMPLR_AUTHOR_EMAIL
      - Custom:
          prompt: "Enter author email:"
          default:
            from: remote_email
  
  - if: workspace_name
    read: package_identifier
    eval: "@{{ workspace_name | kebab-case }}/{{ package_id }}"
    else:
      read: package_identifier
      eval: "{{ package_id }}"

  - read: repository_url
    prompt: "Git URL"
    choices:
      - From git:
          eval: "https://github.com/{{ remote_owner }}/{{ package_id }}"
      - Custom:
          steps:
            - read: custom_remote_owner
              prompt: "Git Owner"
              default:
                from: remote_owner
            - read: custom_package_id
              prompt: "Git Repository Name"
              default:
                from: package_id
          eval: "https://github.com/{{ custom_remote_owner }}/{{ custom_package_id }}"

  - prompt: "Has Shared Resources?"
    choices:
      - Yes:
          steps:
            - degit: Ptolemy2002/npm-bash-scripts/for-shared
              to:
                path: "{{ tmpdir.scripts }}/for-shared"
            - copy:
                path: "{{ tmpdir.scripts }}/for-shared/**/*.*"
              to: "scripts"
      - No:
          eval: "false"

  - degit: Ptolemy2002/npm-bash-scripts/general
    to:
      path: "{{ tmpdir.scripts }}/general"
  - degit: Ptolemy2002/npm-bash-scripts/for-lib
    to:
      path: "{{ tmpdir.scripts }}/for-lib"
  
  - copy:
      path: "{{ tmpdir.scripts }}/general/**/*.*"
    to: "scripts"
  - copy:
      path: "{{ tmpdir.scripts }}/for-lib/**/*.*"
    to: "scripts"

  - update: "README.md"
  - update: "package.json"
  - update: "index.html"
  - update: "lib/**/*.tsx"
  - update: "lib/**/*.ts"
  - update: "src/**/*.tsx"
  - update: "src/**/*.ts"
  - update: "src/**/*.less"
  - remove: "package-lock.json"
  - remove: "dist"
  - remove: ".env"
  - remove: "node_modules"